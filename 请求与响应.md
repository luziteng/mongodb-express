# 请求与响应

## **HTTP协议**

#### 1.简介HTTP协议

（Hyper Text Transfer Protocol，超文本传输协议）,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。

HTTP基于TCP/IP通信协议来传递数据。

HTTP基于客户端/服务端（C/S）架构模型，通过一个可靠的链接来交换信息，是一个无状态的请求/响应协议。

####  2.特点 

（1）HTTP是无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。 

（2）HTTP是媒体独立的：只要客户端和服务器知道如何处理的数据内容，任何类型的数据都可以通过HTTP发送。客户端以及服务器指定使用适合的MIME-type内容类型。

（3）HTTP是无状态：无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。



### **HTTP请求报文解剖**

HTTP请求报文由3部分组成（**请求行+请求头+请求体**）：

![1540134699666](C:\Users\asus\AppData\Local\Temp\1540134699666.png)

**equest Line:请求行请求行（Request Line）分为三个部分：**

请求方法、请求地址和协议及版本，以CRLF(rn)结束。 HTTP/1.1 定义的请求方法有8种：GET、POST、PUT、DELETE、PATCH、HEAD、OPTIONS、TRACE,最常的两种GET和POST，如果是RESTful接口的话一般会用到GET、POST、DELETE、PUT。

**Request Methods注意**，仅有POST、PUT以及PATCH这三个动词时会包含请求体，而GET、HEAD、DELETE、CONNECT、TRACE、OPTIONS这几个动词时不包含请求体

#### Header:请求头：是HTTP的报文头，报文头包含若干个属性，格式为“属性名:属性值”，服务端据此获取客户端的信息。与缓存相关的规则信息，均包含在header中

![1540119316695](C:\Users\asus\AppData\Local\Temp\1540119316695.png)

![1540119356526](C:\Users\asus\AppData\Local\Temp\1540119356526.png)

![1540119464834](C:\Users\asus\AppData\Local\Temp\1540119464834.png)

![1540119493008](C:\Users\asus\AppData\Local\Temp\1540119493008.png)

**请求体：** 是报文体，它将一个页面表单中的组件值通过param1=value1&param2=value2的键值对形式编码成一个格式化串，它承载多个请求参数的数据。不但报文体可以传递请求参数，请求URL也可以通过类似于“/chapter15/user.html? param1=value1&param2=value2”的方式传递请求参数。  

**HTTP请求报文头属性** **Accept**  请求报文可通过一个“Accept”报文头属性告诉服务端 客户端接受什么类型的响应。  如下报文头相当于告诉服务端，俺客户端能够接受的响应类型仅为纯文本数据啊，你丫别发其它什么图片啊，视频啊过来，那样我会歇菜的~~~

Accept属性的值可以为一个或多个MIME类型的值（描述消息内容类型的因特网标准， 消息能包含文本、图像、音频、视频以及其他应用程序专用的数据） 

**请求消息格式**

> 1.请求行，例如：GET /images/logo.png HTTP/1.1
>  2.请求头，例如：Accept: text/plain
>  3.空行
> 4.可选择的请求体



### **HTTP响应报文**

 HTTP的响应报文也由三部分组成（**响应行+响应头+响应体**）

![1540134740739](C:\Users\asus\AppData\Local\Temp\1540134740739.png)

**响应行：**①报文协议及版本；  ②状态码及状态描述；

**响应头：**③响应报文头，也是由多个属性组成； 

**响应体：**④响应报文体，即我们真正要的“干货”

**响应状态码** 

和请求报文相比，响应报文多了一个“响应状态码”，它以“清晰明确”的语言告诉客户端本次请求的处理结果。  HTTP的响应状态码由5段组成：

```
1xx 消息，一般是告诉客户端，请求已经收到了，正在处理，别急...
2xx 处理成功，一般表示：请求收悉、我明白你要的、请求已受理、已经处理完成等信息.3xx 重定向到其它地方。它让客户端再发起一个请求以完成整个处理。
4xx 处理发生错误，责任在客户端，如客户端的请求一个不存在的资源，客户端未被授权，禁止访问等。
5xx 处理发生错误，责任在服务端，如服务端抛出异常，路由出错，HTTP版本不支持等。
```

以下是几个常见的状态码： 

```
200 OK  你最希望看到的，即处理成功！  
303 See Other  我把你redirect到其它的页面，目标的URL通过响应报文头的Location告诉你。 304 Not Modified  告诉客户端，你请求的这个资源至你上次取得后，并没有更改，你直接用你本地的缓存吧，我很忙哦，你能不能少来烦我啊！  
404 Not Found  你最不希望看到的，即找不到页面。如你在google上找到一个页面，点击这个链接返回404，表示这个页面已经被网站删除了，google那边的记录只是美好的回忆。 
500 Internal Server Error 看到这个错误，你就应该查查服务端的日志了，肯定抛出了一堆异常，别睡了，起来改BUG去吧！ 
◆200 (OK): 找到了该资源，并且一切正常。
◆302/307：临时重定向，指出请求的文档已被临时移动到别处, 此文档的新的url在location响应头中给出
◆304 (NOT MODIFIED): 该资源在上次请求之后没有任何修改。这通常用于浏览器的缓存机制。
◆401 (UNAUTHORIZED): 客户端无权访问该资源。这通常会使得浏览器要求用户输入用户名和密码，以登录到服务器。
◆403 (FORBIDDEN): 客户端未能获得授权。这通常是在401之后输入了不正确的用户名或密码。
◆404 (NOT FOUND): 在指定的位置不存在所申请的资源。


```

